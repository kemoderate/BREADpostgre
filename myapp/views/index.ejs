<!DOCTYPE html>
<html>

<head>
  <title>
    <%= title %>
  </title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/6ea2cb925f.js" crossorigin="anonymous"></script>
    <style>
      .sort-icon {
        margin-left: 5px;
      }
      .sort-icon.asc:before {
        content: "\f0de";
      }
      .sort-icon.desc:before {
        content: "\f0dd";
      }
    </style>
</head>

<body>
  <div class="container">
    <h1>BREADS (Browse, Read, Update, Delete, Sort)</h1>
    <h4>Filters</h4>
    <form action="/" method="get">
      <input type="hidden" name="page" value="1">
      <div class="row mb-3">
        <label for="inputId" class="col-sm-4 col-form-label">
          <input type="checkbox" name="checkId" id="checkId" <%= query.checkId ? "checked" : "" %> >
          ID
        </label>
        <div class="col-sm-8">
          <input type="text" class="form-control" id="id" name="id" value="<%= query.id %>">
        </div>
      </div>
      <div class="row mb-3">
        <label for="inputStr" class="col-sm-4 col-form-label">
          <input type="checkbox" name="checkStr" id="checkStr" <%= query.checkStr ? "checked" : "" %>>
          String
        </label>
        <div class="col-sm-8">
          <input type="text" class="form-control" id="string" name="string" value="<%= query.string %>">
        </div>
      </div>
      <div class="row mb-3">
        <label for="inputInt" class="col-sm-4 col-form-label">
          <input type="checkbox" name="checkInt" id="checkInt" <%= query.checkInt ? "checked" : "" %>>
          Integer
        </label>
        <div class="col-sm-8">
          <input type="text" class="form-control" id="integer" name="integer" value="<%= query.integer %>">
        </div>
      </div>
      <div class="row mb-3">
        <label for="inputFloat" class="col-sm-4 col-form-label">
          <input type="checkbox" name="checkFloat" id="checkFloat" <%= query.checkFloat ? "checked" : ""%>>
          Float
        </label>
        <div class="col-sm-8">
          <input type="text" class="form-control" id="float" name="float" value="<%= query.float %>">
        </div>
      </div>
      <div class="row mb-3">
        <label for="inputDate" class="col-sm-4 col-form-label">
          <input type="checkbox" name="checkDate" id="checkDate" <%= query.checkDate ? "checked" : "" %>>
          Date
        </label>
        <div class="col-sm-4">
          <input type="date" class="form-control" id="startDate" name="startDate" value="<%= query.startDate %>">
          to
          <input type="date" class="form-control" id="endDate" name="endDate" value="<%= query.endDate %>">
        </div>
      </div>
      <div class="row mb-3">
        <label for="inputBol" class="col-sm-4 col-form-label">
          <input type="checkbox" name="checkBol" id="checkBol" <%= query.checkBol ? "checked" : ""%>>
          Boolean
        </label>
        <div class="col-sm-8">
          <select name="boolean" id="boolean" class="form-select" >
            <option>Choose the boolean</option>
            <option value="true" <%= query.boolean == "true" ? "selected" : "" %>>True</option>
            <option value="false" <%= query.boolean == "false"? "selected" : "" %>>False</option>
          </select>
        </div>
      </div>
      <button type="submit" class="btn btn-primary">Search</button>
      <a href="/" class="btn btn-secondary">Back</a>
    </form>
  </div>
  <br>
  <div class="container">
    <table class="table table-striped table-bordered">
      <thead>
        <tr align="center">
          <th>
            ID
            <a href="<%= url %>&sortby=id&sortorder=<%= sortDir === 'asc' && sortBy === 'id' ? 'desc' : 'asc' %>">
              <span class="fa <%= sortDir === 'asc' && sortBy === 'id' ? 'fa-sort-up' : sortDir === 'desc' && sortBy === 'id' ? 'fa-sort-down' : 'fa-sort' %>"></span>
            </a>
          </th>
          <th>
            String
            <a href="<%= url %>&sortby=string&sortorder=<%= sortDir === 'asc' && sortBy === 'string' ? 'desc' : 'asc' %>">
              <span class="fa <%= sortDir === 'asc' && sortBy === 'string' ? 'fa-sort-up' : sortDir === 'desc' && sortBy === 'string' ? 'fa-sort-down' : 'fa-sort' %>"></span>
            </a>
          </th>
          <th>
            Integer
            <a href="<%= url %>&sortby=integer&sortorder=<%= sortDir === 'asc' && sortBy === 'integer' ? 'desc' : 'asc' %>">
              <span class="fa <%= sortDir === 'asc' && sortBy === 'integer' ? 'fa-sort-up' : sortDir === 'desc' && sortBy === 'integer' ? 'fa-sort-down' : 'fa-sort' %>"></span>
            </a>
          </th>
          <th>
            Float
            <a href="<%= url %>&sortby=float&sortorder=<%= sortDir === 'asc' && sortBy === 'float' ? 'desc' : 'asc' %>">
              <span class="fa <%= sortDir === 'asc' && sortBy === 'float' ? 'fa-sort-up' : sortDir === 'desc' && sortBy === 'float' ? 'fa-sort-down' : 'fa-sort' %>"></span>
            </a>
          </th>
          <th>
            Date
            <a href="<%= url %>&sortby=date&sortorder=<%= sortDir === 'asc' && sortBy === 'date' ? 'desc' : 'asc' %>">
              <span class="fa <%= sortDir === 'asc' && sortBy === 'date' ? 'fa-sort-up' : sortDir === 'desc' && sortBy === 'date' ? 'fa-sort-down' : 'fa-sort' %>"></span>
            </a>
          </th>
          <th>
            Boolean
            <a href="<%= url %>&sortby=boolean&sortorder=<%= sortDir === 'asc' && sortBy === 'boolean' ? 'desc' : 'asc' %>">
              <span class="fa <%= sortDir === 'asc' && sortBy === 'boolean' ? 'fa-sort-up' : sortDir === 'desc' && sortBy === 'boolean' ? 'fa-sort-down' : 'fa-sort' %>"></span>
            </a>
          </th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <% data.forEach(item=> { %>
        <tr align="center">
              <td><%= item.id %></td>
              <td><%= item.string%></td>
              <td><%= item.integer%></td>
              <td><%= item.float%></td>
              <td><%= moment(item.date).format('YYYY-MM-DD')%></td>
              <td><%= item.boolean%></td>
              <td>
                <a href="/edit/<%= item.id %>" class="btn btn-success btn-sm">Edit</a>
                <a href="/delete/<%= item.id %>" class="btn btn-danger btn-sm">Delete</a>
              </td>
            </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
  <div class="container">
    <nav aria-label="Page navigation example">
      <ul class="pagination">
        <!-- error handling previous page -->
        <% if(page > 1) { %>
          <li class="page-item">
            <a class="page-link" href="<%= url.replace(`page=${parseInt(page)}`, `page=${parseInt(page) - 1}`) %>">
            Previous</a>
          </li>
        <% } %>
        <% for( let i = 1; i <= pages; i++ ) { %>
          <li class="page-item">
            <a href="<%= url.replace(`page=${page}`, `page=${i}`) %>" class="page-link <%= page == i ? 'active' : '' %>" ><%=i %></a>
          </li>
        <% } %>
        <!-- error handling next page -->
        <% if (page < pages) { %>
          <li class="page-item">
            <a class="page-link" href="<%= url.replace(`page=${parseInt(page)}`, `page=${parseInt(page) + 1}`) %>">
              Next
            </a>
          </li>
        <% } %>
      </ul>
    </nav>
    <a href="/add" class="btn btn-primary">Add</a>
  </div>
</body>

</html>